<div class="admin-custom-fields-dashboard">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-title">
        <h1 class="title">Constructor de Formularios</h1>
        <p class="subtitle">Crea y personaliza campos personalizados para perfiles y registro</p>
      </div>
      <div class="header-actions">
        <button class="help-btn" (click)="showHelp()">
          <i class="material-icons">help</i>
          <span class="btn-text">Ayuda</span>
        </button>
        <button class="refresh-btn" (click)="refreshFormBuilder()">
          <i class="material-icons" [class.rotating]="isLoading">refresh</i>
          <span class="btn-text">Recargar</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div class="help-modal" *ngIf="showHelpModal" (click)="closeHelp()">
    <div class="help-content" (click)="$event.stopPropagation()">
      <div class="help-header">
        <h3>Guía de Uso del Constructor</h3>
        <button class="close-btn" (click)="closeHelp()">
          <i class="material-icons">close</i>
        </button>
      </div>
      <div class="help-body">
        <div class="help-section">
          <h4><i class="material-icons">drag_indicator</i> Arrastrar y Soltar</h4>
          <p>Arrastra los campos desde el panel izquierdo hacia el área de formulario para agregarlos.</p>
        </div>
        <div class="help-section">
          <h4><i class="material-icons">settings</i> Configuración</h4>
          <p>Haz clic en el ícono de configuración para personalizar cada campo: etiqueta, validaciones, opciones, etc.</p>
        </div>
        <div class="help-section">
          <h4><i class="material-icons">save</i> Guardar</h4>
          <p>Los cambios se guardan automáticamente cuando arrastras campos o modificas configuraciones.</p>
        </div>
        <div class="help-section">
          <h4><i class="material-icons">delete</i> Eliminar</h4>
          <p>Usa el ícono de eliminar para quitar campos del formulario.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="form-builder-container">
    <div class="form-builder-wrapper">
      <worky-form-builder></worky-form-builder>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <div class="loading-spinner">
      <i class="material-icons rotating">refresh</i>
      <p>Cargando constructor de formularios...</p>
    </div>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error">
    <div class="error-content">
      <i class="material-icons error-icon">warning</i>
      <h3>Error al cargar el constructor</h3>
      <p>{{ error }}</p>
      <button class="refresh-btn primary" (click)="refreshFormBuilder()">
        <i class="material-icons">refresh</i>
        <span>Intentar de nuevo</span>
      </button>
    </div>
  </div>
</div>
