<div class="site-config-dashboard">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-title">
        <h1 class="title">Configuración del Sitio</h1>
        <p class="subtitle">Gestiona la configuración general de la plataforma</p>
      </div>
      <div class="header-actions">
        <button class="save-btn" (click)="updateConfig()" [disabled]="loadUpdateConfigButtons || !configForm.valid">
          <i class="material-icons" [class.rotating]="loadUpdateConfigButtons">save</i>
          <span class="btn-text">Guardar Cambios</span>
        </button>
        <button class="refresh-btn" (click)="getSiteConfig()" [disabled]="loadUpdateConfigButtons">
          <i class="material-icons">refresh</i>
          <span class="btn-text">Recargar</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loadUpdateConfigButtons">
    <div class="loading-spinner">
      <i class="material-icons rotating">refresh</i>
      <p>Guardando configuración...</p>
    </div>
  </div>

  <!-- Main Configuration Form -->
  <div class="config-content" *ngIf="!loadUpdateConfigButtons">
    <form [formGroup]="configForm" class="config-form">
      
      <!-- Basic Information Section -->
      <div class="config-section">
        <div class="section-header">
          <div class="section-icon">
            <i class="material-icons">info</i>
          </div>
          <div class="section-info">
            <h3 class="section-title">Información Básica</h3>
            <p class="section-description">Configuración general del sitio web</p>
          </div>
        </div>
        
        <div class="section-content">
          <div class="form-grid">
            <div class="form-group">
              <label for="title" class="form-label">
                <i class="material-icons">title</i>
                Título del Sitio
              </label>
              <input 
                formControlName="title" 
                id="title" 
                type="text" 
                class="form-input"
                placeholder="Ingresa el título de tu sitio"
              >
            </div>

            <div class="form-group">
              <label for="urlSite" class="form-label">
                <i class="material-icons">link</i>
                URL del Sitio
              </label>
              <input 
                formControlName="urlSite" 
                id="urlSite" 
                type="url" 
                class="form-input"
                placeholder="https://tusitio.com"
              >
            </div>

            <div class="form-group">
              <label for="contactEmail" class="form-label">
                <i class="material-icons">email</i>
                Email de Contacto
              </label>
              <input 
                formControlName="contactEmail" 
                id="contactEmail" 
                type="email" 
                class="form-input"
                placeholder="contacto@tusitio.com"
              >
            </div>

            <div class="form-group full-width">
              <label for="description" class="form-label">
                <i class="material-icons">description</i>
                Descripción de la App
              </label>
              <textarea 
                formControlName="description" 
                id="description" 
                class="form-textarea"
                rows="3"
                placeholder="Describe brevemente tu aplicación..."
              ></textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Branding Section -->
      <div class="config-section">
        <div class="section-header">
          <div class="section-icon">
            <i class="material-icons">palette</i>
          </div>
          <div class="section-info">
            <h3 class="section-title">Identidad Visual</h3>
            <p class="section-description">Logo y elementos visuales del sitio</p>
          </div>
        </div>
        
        <div class="section-content">
          <div class="branding-grid">
            <div class="logo-section">
              <div class="logo-preview-container">
                <img
                  [src]="imagePreview || configForm.get('logoUrl')?.value || defaultLogo"
                  alt="Vista previa del logo"
                  class="logo-preview"
                />
                <div class="logo-overlay">
                  <i class="material-icons">image</i>
                </div>
              </div>
              
              <div class="logo-actions">
                <div class="form-group">
                  <label for="logoUrl" class="form-label">
                    <i class="material-icons">link</i>
                    URL del Logo
                  </label>
                  <input 
                    formControlName="logoUrl" 
                    id="logoUrl" 
                    type="url" 
                    class="form-input"
                    placeholder="https://ejemplo.com/logo.png"
                  >
                </div>
                
                <div class="form-group">
                  <label for="image" class="form-label">
                    <i class="material-icons">upload</i>
                    Subir Logo
                  </label>
                  <input 
                    id="image" 
                    type="file" 
                    (change)="onFileChange($event)"
                    accept="image/*"
                    class="form-file-input"
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Legal Section -->
      <div class="config-section">
        <div class="section-header">
          <div class="section-icon">
            <i class="material-icons">gavel</i>
          </div>
          <div class="section-info">
            <h3 class="section-title">Información Legal</h3>
            <p class="section-description">Políticas y términos legales</p>
          </div>
        </div>
        
        <div class="section-content">
          <div class="form-group">
            <label for="privacyPolicy" class="form-label">
              <i class="material-icons">security</i>
              Política de Privacidad
            </label>
            <textarea 
              formControlName="privacyPolicy" 
              id="privacyPolicy" 
              class="form-textarea"
              rows="6"
              placeholder="Ingresa tu política de privacidad..."
            ></textarea>
          </div>
        </div>
      </div>

      <!-- Authentication Section -->
      <div class="config-section">
        <div class="section-header">
          <div class="section-icon">
            <i class="material-icons">lock</i>
          </div>
          <div class="section-info">
            <h3 class="section-title">Autenticación</h3>
            <p class="section-description">Configuración de métodos de acceso</p>
          </div>
        </div>
        
        <div class="section-content">
          <div class="auth-grid">
            <div class="auth-methods">
              <h4 class="auth-subtitle">Métodos de Inicio de Sesión</h4>
              
              <div formGroupName="loginMethods" class="toggle-group">
                <div class="toggle-item">
                  <label class="toggle-switch">
                    <input 
                      type="checkbox"
                      formControlName="email"
                      class="toggle-input"
                    >
                    <span class="toggle-slider"></span>
                  </label>
                  <div class="toggle-info">
                    <span class="toggle-label">Iniciar sesión con Email</span>
                    <span class="toggle-description">Permitir registro con email y contraseña</span>
                  </div>
                </div>

                <div class="toggle-item">
                  <label class="toggle-switch">
                    <input 
                      type="checkbox"
                      formControlName="google"
                      class="toggle-input"
                    >
                    <span class="toggle-slider"></span>
                  </label>
                  <div class="toggle-info">
                    <span class="toggle-label">Iniciar sesión con Google</span>
                    <span class="toggle-description">Permitir registro con cuenta de Google</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="registration-settings">
              <h4 class="auth-subtitle">Configuración de Registro</h4>
              
              <div class="toggle-item">
                <label class="toggle-switch">
                  <input 
                    type="checkbox"
                    formControlName="invitationCode"
                    class="toggle-input"
                  >
                  <span class="toggle-slider"></span>
                </label>
                <div class="toggle-info">
                  <span class="toggle-label">Registro con Código de Invitación</span>
                  <span class="toggle-description">Requerir código de invitación para registrarse</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </form>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error">
    <div class="error-content">
      <i class="material-icons error-icon">warning</i>
      <h3>Error al cargar configuración</h3>
      <p>{{ error }}</p>
      <button class="refresh-btn primary" (click)="getSiteConfig()">
        <i class="material-icons">refresh</i>
        <span>Intentar de nuevo</span>
      </button>
    </div>
  </div>
</div>

