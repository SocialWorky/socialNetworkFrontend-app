<div class="avatar" [style.width.px]="size" [style.height.px]="size">
  <!-- Skeleton while loading -->
  <div *ngIf="isLoading && !hasError" class="avatar-skeleton">
    <div class="skeleton-placeholder animate-pulse"></div>
  </div>

  <!-- Avatar image -->
  <img
    *ngIf="imageData && !isLoading && !hasError"
    [src]="imageData"
    [alt]="'Avatar de ' + (name || username)"
    class="avatar-image"
    (error)="onImageError()"
  />

  <!-- Generated avatar with initials -->
  <div
    *ngIf="(!imageData || hasError) && !isLoading && showInitials && isGeneratedAvatar"
    class="avatar-initials"
    [style.background-color]="backgroundColor"
    [style.font-size.px]="fontSize"
  >
    {{ initials }}
  </div>
</div>
