<div *ngIf="!unlockReactions" class="reactions-skeleton">
  <div class="skeleton-reaction-button">
    <div class="skeleton-icon"></div>
  </div>
</div>
<div class="reaction-container-wrapper"
  (mouseleave)="hideReactions()"
  (mouseenter)="showReactions()"
  (touchstart)="onTouchStart()"
  (touchend)="onTouchEnd()">
  <div *ngIf="unlockReactions" class="reaction-container no-select-text">

    <div class="content-text-reaction no-select-text"
        *ngIf="!reactionUserInPublication">
      <i class="material-icons">mood</i>
      <span>{{ 'publicationsView.spanReaction' | workyTranslations }}</span>
    </div>

    <div *ngIf="reactionUserInPublication"
        class="selected-reaction no-select-text"
        (mouseenter)="showReactions()"
        (click)="deleteReaction(reactionUserInPublication._id)"
        (touchstart)="onTouchStart()"
        (touchend)="onTouchEnd()">
      <div class="reaction-icon-container">
        <img 
          [src]="reactionUserInPublication.customReaction.emoji" 
          [alt]="reactionUserInPublication.customReaction.name"
          class="reaction-emoji-img"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='block'"
          onload="this.style.display='block'; this.nextElementSibling.style.display='none'"
        />
        <i class="material-icons reaction-fallback-icon" style="display: none;">
          mood
        </i>
      </div>
      <div>{{ reactionUserInPublication.customReaction.name }}</div>
    </div>

    <div #reactionPopup
      class="reaction-popup"
      [ngClass]="{'reaction-popup-visible': reactionsVisible}">
      <div class="reaction"
          *ngFor="let reaction of reactions"
          [class.zoomed]="reaction.zoomed"
          (mouseenter)="zoomIn(reaction)"
          (mouseleave)="zoomOut(reaction)"
          [matTooltip]="reaction.name"
          matTooltipPosition="above"
          matTooltipClass="extra-mat-tooltip"
          (click)="addReaction(reaction)">
        <worky-image 
          class="reaction-image" 
          [src]="reaction.emoji" 
          [alt]="reaction.name"
          [skeletonWidth]="'40px'"
          [skeletonHeight]="'40px'"
          [maxRetries]="0"
          [loadingTimeout]="3000">
        </worky-image>
      </div>
    </div>
  </div>
</div>
