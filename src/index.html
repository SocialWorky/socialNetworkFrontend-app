<!DOCTYPE html>
<html lang="es" translate="no">

<head>
  <meta charset="utf-8" />
  <title></title>

  <meta name="title" content="__TITLE__" />
  <meta name="description" content="__DESCRIPTION__" />
  <meta name="keywords" content="__KEYWORDS__" />
  <meta name="image" content="_IMAGE_" />
  <meta name="url" content="_URL_" />


  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="__OG_SITE_NAME__" />
  <meta property="og:url" content="OG_URL" />
  <meta property="og:title" content="__OG_TITLE__" />
  <meta property="og:description" content="__OG_DESCRIPTION__" />
  <meta property="og:image" content="OG_IMAGE" />

  <!-- Twitter -->
  <meta property="twitter:card" content="__TWITTER_CARD__" />
  <meta property="twitter:url" content="TWITTER_URL" />
  <meta property="twitter:title" content="__TWITTER_TITLE__" />
  <meta property="twitter:description" content="__TWITTER_DESCRIPTION__" />
  <meta property="twitter:image" content="TWITTER_IMAGE" />

  <base href="/" />

  <meta name="color-scheme" content="light dark" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=content, user-scalable=no">
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  
  <!-- iOS-specific optimizations -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Worky" />
  <meta name="mobile-web-app-capable" content="yes" />
  
  <!-- iOS performance optimizations -->
  <meta name="apple-touch-fullscreen" content="yes" />
  <meta name="apple-mobile-web-app-orientations" content="portrait" />

  <link rel="manifest" href="manifest.json" /> 

  <!-- iOS meta tags -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="__PWA_NAME__" />
  
  <!-- iOS icons -->
  <link rel="apple-touch-icon" href="assets/icons/icon-__PWA_NAME__-152x152.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/icon-__PWA_NAME__-152x152.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-__PWA_NAME__-192x192.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="assets/icons/icon-__PWA_NAME__-192x192.png" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <!-- Google Fonts - Optimizadas para rendimiento -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Material Icons - Críticos para navegación -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap">
  
  <!-- Material Symbols - Críticos para navegación -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap">
  
  <link rel="icon" type="image/png" href="assets/icons/icon-__PWA_NAME__-72x72.png" />

  <style>
    #loading-screen {
      position: fixed;
      width: 100vw;
      height: 100vh;
      background-color: #__PWA_BACKGROUND_COLOR__;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #loading-screen img {
      max-width: 200px;
      max-height: 200px;
    }

  </style>
  
</head>

<body>
  <div id="loading-screen" *ngIf="loadingService.getLoading()">
   <div class="loader"></div>
</div>
  <worky-root></worky-root>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    window.loadPWACacheUtils = () => {
      if (window.PWACacheUtils) {
        return Promise.resolve(window.PWACacheUtils);
      }
      
      return new Promise((resolve, reject) => {
        const script = document.createElement('script');
        
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
          script.src = '/scripts/clear-pwa-cache.js';
        } else {
          script.src = '/assets/js/clear-pwa-cache.js';
        }
        
        script.onload = () => {
          resolve(window.PWACacheUtils);
        };
        script.onerror = () => {
          reject(new Error('PWA Cache Utils not available'));
        };
        document.head.appendChild(script);
      });
    };
    
    window.clearPWACache = async () => {
      try {
        await window.loadPWACacheUtils();
        if (window.PWACacheUtils && window.PWACacheUtils.clearPWACache) {
          await window.PWACacheUtils.clearPWACache();
        }
      } catch (error) {
        console.warn('PWA Cache Utils not available for cache clearing');
      }
    };
  </script>
</body>

</html>
